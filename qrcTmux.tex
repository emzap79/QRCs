% vim:fdm=marker:filetype=tex:ts=2:expandtab
% TMUXQuick Reference Card
% Copyright (c) 2014 Jonas Petong.
% TeX Format - Based on VIM Quick Reference Card

% compile as 'pdftex git-qrc.tex'

\def\versionnumber{0.1}  % Version of this reference card
\def\year{2014}
\def\month{May}
\def\version{v\versionnumber\ \month\ \year}

\def\shortcopyrightnotice{\smallskip
  \centerline{\smallrm \copyright\ \year\ Jonas Petong -
  Permissions on back. \version}}

\def\shortintro{\smallskip
\centerline{\smallrm Frequently used TMUX commands -- Version \version}}

\def\copyrightnotice{
\vfill
\hrule\smallskip\begingroup\smallrm
% \centerline{\version. Copyright \copyright\ \year\ Jonas Petong}
\centerline{http://github.com/emzap79/QRCs}
\centerline{emzap79@gmail.com}\\
This TeXfile is based on Gabriel B. Burcas \copyright\ git-qrc.tex
and has then been modified to my own use.
\endgroup}

% \pdfoutput=1
\pdfpageheight=21cm
\pdfpagewidth=29.7cm

% Font definitions
\font\bigbf=cmbx12
\font\smallrm=cmr8
\font\smalltt=cmtt8
\font\tinyit=cmmi5

% Title & Sections
\def\title#1{\hfil{\bf #1}\hfil\par\vskip 2pt\hrule}
\def\section#1#2{\vskip 0.7cm {\bf#1}\par\vskip 1pt\hrule\vskip 1pt#2\vskip 5pt}
\def\subsection#1#2{\vskip 0.7cm {#1\/}\par\vskip 1pt\hrule\vskip 1pt#2\vskip 5pt}
\def\subsubsection#1{\vskip 0.7cm {#1\/}\par\vskip 1pt\vskip 1pt}

% Characters definitions
\def\\{\hfil\break}
\def\bs{$\backslash$}
\def\backspace{$\leftarrow$}
\def\ctrl{{\rm\char94}\kern-1pt}
\def\enter{$\hookleftarrow$}
\def\arrows{$\leftrightarrow$}
\def\or{\thinspace{\tinyit{or}}\thinspace}
\def\key#1{$\langle${\rm{\it#1\/}}$\rangle$}
\def\rapos{\char125}
\def\lapos{\char123}
\def\bs{\char92}
\def\tild{\char126}
\def\lbracket{[}
\def\rbracket{]}

% Three columns definitions
\parindent 0pt
\nopagenumbers
\hoffset=-1.56cm
\voffset=-1.54cm
\newdimen\fullhsize
\fullhsize=27.9cm
\hsize=8.5cm
\vsize=19cm
\def\fullline{\hbox to\fullhsize}
\let\lr=L
\newbox\leftcolumn
\newbox\midcolumn
\output={
  \if L\lr
    \global\setbox\leftcolumn=\columnbox
    \global\let\lr=M
  \else\if M\lr
    \global\setbox\midcolumn=\columnbox
    \global\let\lr=R
  \else
    \tripleformat
    \global\let\lr=L
  \fi\fi
  \ifnum\outputpenalty>-20000
  \else
    \dosupereject
  \fi}
\def\tripleformat{
  \shipout\vbox{\fullline{\box\leftcolumn\hfil\box\midcolumn\hfil\columnbox}}
  \advancepageno}
\def\columnbox{\leftline{\pagebody}}

% TMUXoptimizations
\def\cmd#1{{\tt#1}\null}	%\null so not an abbrev even if period follows
\def\gray#1{\pdfliteral{0.65 0.65 0.65 rg}#1\pdfliteral{0 0 0 rg}}
\def\black#1{\pdfliteral{0 0 0 rg}#1\pdfliteral{0.65 0.65 0.65 rg}}

% A short command%{{{

\def\cmdS#1#2{
  \noindent
  \hbox to \hsize {%
    \vtop{
      \hbox to 2.4cm {
        \noindent\cmd{#1}\dotfill
      }
      %\hrule
    }%
    \hfil	% absorb extra space b/w columns
    \vtop{
      \hsize=5.90cm
      \hbox{\hfuzz = 15pt \vtop{
      {#2}
      }}
      %\hrule
    }
  }
  %\hrule
  \par
  \vskip 0.14cm
}

%}}}
% A long command%{{{

\def\cmdL#1#2{
  \hsize=8.5cm
  \vbox {
    \hbox{
        \cmd{#1}\hfil
    }%
    %\vskip -0.2cm % adjusts space b/w command & description
    \hskip 2.5cm  % indent for description
    \hbox to 5.9cm {%
      \hfuzz = 5pt
      % Use the first one when right-aligned
      %\vrule\hskip -0.05cm
      %\vrule\hskip 0.05cm
      \hfil
      \hsize=5.9cm
      \vtop{
        %\hrule
        % Uncomment line below to right-align description
        %\leftskip=0cm plus 150fil
        {#2}
        }}
  }%
  %\hrule
  \par
  \vskip 0.14cm
}

%}}}
% A short option-command%{{{

\def\cmdOpt#1#2{
  \noindent
  \hbox to \hsize {% This comment is needed to remove space at start of line
    \vtop{
      \hbox to 2.4cm {
      % \hfuzz = 5pt
      \hskip 24pt
      \hfil
      % \hsize=1.9cm
      \noindent\cmd{\tt-#1}
      }
      %\hrule
    }% This comment is needed to remove space
    \hfil	% absorb extra space b/w columns
    \vtop{
      \hsize=5.90cm
      \hbox{\hfuzz = 15pt \vtop{
      % Uncomment line below to right-align description
      %\leftskip=0cm plus 150fil
      {#2}
      }}
      %\hrule
    }
  }
  %\hrule
  \par
  \vskip 0.14cm
}

%}}}
% A long option-command%{{{

\def\cmdOptL#1#2{
  \noindent
  \hbox to \hsize {% This comment is needed to remove space at start of line
    \vtop{
      \hbox to 2.4cm {
      %\hfuzz = 5pt
      %\hsize=5.9cm
      \hskip 15pt
      \noindent\cmd{\tt--#1}
      \hfil
      }
      %\hrule
    }% This comment is needed to remove space
    \hfil	% absorb extra space b/w columns
    \vtop{
      \hsize=5.90cm
      \hbox{\hfuzz = 15pt \vtop{
      {#2}
      }}
      %\hrule
    }
  }
  %\hrule
  \par
  \vskip 0.14cm
}

%}}}
% A very long option-command%{{{

\def\cmdOptLl#1#2{
    \hsize=8.5cm
    \vbox {
        \hbox{
      \hskip 15pt
      \noindent\cmd{\tt--#1}
      \hfil
        }%
        \hskip 70pt  % indent for description
        \hbox to 5.9cm {%
            \hfuzz = 5pt
            \hfil
            \hsize=5.9cm
            \vtop{
                {#2}
            }}
    }%
    %\hrule
    \par
    \vskip 0.14cm
}

%}}}

% Card content
% Header
\title{TMUX QUICK REFERENCE CARD}

% \shortcopyrightnotice
\shortintro

\section{From Shell}{}

\cmdL{create session}	{tmux new -s {\tt session-name}}
\cmdL{kill session}	{tmux kill-session -t {\tt session-name}}
\cmdL{attach session}	{tmux attach -t {\tt session-name}}
\cmdL{rename session}	{tmux rename-session -t {\tt old-name} {\tt new-name}}
\cmdL{list session}	{tmux ls}

\section{Inside Tmux}{Prefix key is set to {\tt \ctrl b} by default}

\subsection{Sessions}{}
\cmdS{\ctrl b?}	{show all available keybinds}
\cmdS{\ctrl bd \ctrl bs}	{detach / reattach to session}
\cmdS{\arrows}{bla}

\subsection{Copy Mode}{{\tt vim} like movements}
\cmdS{h j k l}{move left/down/up/right}
\cmdS{\ctrl b\lbracket ~ q}	{enter / exit copy mode}
\cmdS{\key{space} \enter}	{select / copy text under cursor}

\subsection{Windows}{}
\cmdS{\ctrl bc \ctrl b,}	{create / rename window}
\cmdS{\ctrl bn \ctrl bp \ctrl bl}	{navigate next/prev/last window}

\subsection{Panes/Buffers}{}
\cmdS{\ctrl b\%  \ctrl b"}	{split pane vertic / horiz}
\cmdS{\ctrl bx \or \ctrl d }	{delete pane}
\cmdS{\ctrl b$n$}	{change to buffer $0 \ldots n$}
\cmdS{\ctrl b\key{arrow}}	{select pane}
\cmdL{\ctrl b\key{m-arrow} ~ \ctrl bz}	{resize / full-screen pane}

%% Footer
\copyrightnotice

% Ending
\supereject
\if L\lr \else\null\vfill\eject\fi
\if L\lr \else\null\vfill\eject\fi
\bye

% EOF
