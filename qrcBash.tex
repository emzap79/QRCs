% vim:ts=2:fdm=marker:expandtab
% GIT Quick Reference Card
% Copyright (c) 2011 Jonas Petong.
% TeX Format - Based on VIM Quick Reference Card

% compile as 'pdftex qrcBash.tex'
% preamble%{{{

\def\content{CLI}
\def\versionnumber{1.1}  % Version of this reference card
\def\year{2014}
\def\month{May}
\def\version{v\versionnumber\ \month\ \year}

\input mydefs.sty

% Card content
% Header
\title{\uppercase{\content\ quick reference card}}
% A example command%{{{

\def\cmdExample#1#2{
\pdfliteral{0.35 0.35 0.35 rg}
  \noindent
  \hbox to \hsize {% This comment is needed to remove space at start of line
    \vtop{
      \hbox to 3.2cm {
      % \hfuzz = 5pt
      \hskip 4pt
      \hfil
      %\hsize=5.9cm
      \noindent{\tt#1}
      }
      %\hrule
    }% This comment is needed to remove space
    \hfil	% absorb extra space b/w columns
    \vtop{
      \hsize=4.90cm
      \hbox{\hfuzz = 15pt \vtop{
      % Uncomment line below to right-align description
      %\leftskip=0cm plus 150fil
      \tt{#2}
      }}
      %\hrule
    }
  }
  %\hrule
  \par
  \vskip 1ex
\pdfliteral{0 0 0 rg}
}%}}}
% An option command%{{{

% \shortcopyrightnotice
\shortintro

% card content%{{{

\section{Basic Operations}{}%{{{

\cmdS{cd $path$}{change directory}
\subsubsection{Possible Values for \key{path}}{}
\cmdOper{\ ..}{move one folder up}
\cmdOper{--}{change to last visited directory}
\cmdOper{\key{None}}{change to homedir ($\sim$)}
\cmdS{mkdir $fold$}{create new folder in current $path$}

%}}}
\section{Movements}{for \key{esc} you can use either \key{esc} and \key{alt}-key}%{{{

\cmdS{\ctrl a\ \ctrl e}{jump to begin / end of the line}
\cmdL{\key{esc f}\ /\ \key{esc b}}{jump one word forward/backward}
\cmdS{\ctrl s~\ctrl c}{pause / cancel current command}
\cmdS{\ctrl q}	{resume previous paused process}
\cmdS{\ctrl y}{paste most recently cut out text}
\cmdL{\key{esc d}\ /\ \key{esc $\leftarrow$}}{cut one word forward/backward}
\cmdS{\ctrl w}{cut text backward until space}
\cmdS{\ctrl u\ /\ \ctrl k}{cut from current position to the beginning/end of line}
\cmdS{\ctrl \#}{prepend hashtag on command, then jump to next line (... and reedit later)}

%}}}
\section{History}{clearing your entire history event line: {\tt history -c}}%{{{

\subsection{Shortcuts}{}
\cmdS{\ctrl p}{fetch the previous command from the history list}
% \cmdS{\ctrl n}{fetch the next command from the history list}
\cmdS{\ctrl r}{search history backward (incremental search)}
\cmdS{\key{esc -\ }}{running last executed command}
% \cmdS{\ctrl r}{search history backward for a command matching \it{string}}
% \cmdS{\ctrl s}{search history forward (incremental search)}
% \cmdS{\ctrl s}{search history forward for a command matching \it{string}}
\cmdS{\key{esc p}}{search backward using non-incre\-mental search}
\cmdS{\key{esc n}}{search forward using non-incremental search}
\cmdS{\key{esc $<$}}{move to the first line in the history}
\cmdS{\key{esc $>$}}{move to the end of the history list (current entry)}
% \cmdS{k}{fetch the previous command from the history list}
% \cmdS{j}{fetch the next command from the history list}
% \cmdS{n}{repeat search in the same direction as previous}
% \cmdS{N}{repeat search in the opposite direction as previous}
% \cmdS{G}{move to the N-th history line}
% \cmdExample{15G}{move to $15$th line}

%}}}
\subsection{History-Commands}{example command is: {\tt cd foo/bar}}%{{{


\cmdS{!!}{runs previous executed command (also known as `bang bang')}
\cmdExample{sudo\ !!}{sudo cd foo/bar}
\cmdS{!\$ / \key{esc .\ }}{repeats last $arg$ of prev command}
\cmdS{!$n$\ / !-$n$}{executes command $n$/$n$th last command}
\cmdS{!$str$\ / !?$str$?}{runs last executed command, starting with/containing string or character $str$ (ending ? is optional)}
\cmdExample{!cd}{cd foo/bar}
\cmdExample{!?sudo?}{sudo cd foo/bar}
\cmdS{!!:$des$}{appends first/last/specific/all $arg$'s of last command (trailing :$des$ refers to below listed designators)}
\cmdExample{echo !cd:q}{echo 'cd foo/bar'}
\cmdS{!\#}{refers to the entire command line typed so far}
\subsubsection{Designators}%{{{

\cmdOper{0}{the zeroth (first) word in a line (usually command name)}
\cmdOper{n}{the $n$th word in a line}
\cmdOper{\^{}}{the first $arg$ (the second word) in a line}
\cmdOper{$\$$}{the last argument $arg$ in a line}
\cmdOper{\%}{the word $str$ matched by the most recent !?$str$? search}
\cmdOper{$m$-$n$}{a range of words from $m$ to $n$ (-$n$ is synonymous with 0-$n$)}
\cmdOper{*}{all $arg$'s}
\cmdOper{$m$*}{synonymous with $m$-\$}
\cmdOper{$m$-}{from $arg$ $m$ to end, ommitting last word}

%}}}

%}}}
\subsection{Substitutions \& Replacements}{}%{{{

\cmdS{\^{}$str_1$\^{}$str_2$\^{}}{quick substitution. Repeats the last command, replacing $str_1$ with $str_2$}
\cmdL{$mod\,$s/old/new/}{substitutes new for old (for meaning of $mod$ see below)}

%}}}
\subsubsection{Modifiers ($mod$)}%{{{

% http://www.softpanorama.org/Scripting/Shellorama/bash_command_history_reuse.shtml#Modifiers
\cmdOper{h}{removes a trailing pathname component, leaving the head}
\cmdOper{t}{removes all leading pathname components, leaving the tail (filename in path)}
\cmdOper{r}{removes a trailing suffix of the form .xxx, leaving the basename}
\cmdOper{e}{removes all but the trailing suffix}
\cmdOper{p}{prints the resulting command but does not execute it}
\cmdOper{q}{quotes the substituted words, escaping further substitutions}
\cmdOper{m}{quotes the substituted words, breaking them into words at blanks and newlines}
\cmdOper{\&}{repeats the previous substitution}
\cmdOper{g}{causes s/old/new/ or \& to be applied over the entire event line}
\cmdOper{G}{apply the following `s' modifier just once to each word in the event line.}

%}}}
\section{Bashrc}{The prompt of your {\tt shell} can be adjusted while changing {\tt PS1=<expr>} in your {\tt \tild.bashrc}}
\subsection{History Modifying Settings}{append {\tt export <setting>=<value>} to your$\,\sim$/.bashrc}%{{{

\cmdS{HISTFILE}{if set to /dev/null history file is rejected (Default:$\,\sim$/.bash\_history)}
\cmdL{HISTFILESIZE}{controls how many history commands to keep in HISTFILE (Default: 500)}
\cmdS{HISTSIZE}{controls how many history commands to keep in the history list of current session (Default: 500)}
\cmdL{HISTCONTROL}{modality of how to save commands on the history list.}
\cmdOptLl{ignorespace}{if the list of values includes ignorespace, lines which begin with a space character are not saved in the history list.}
\cmdOptLl{ignoredups}{a value of ignoredups causes lines matching the previous history  entry  to  not  be saved.}
\cmdOptLl{ignoreboth}{a value of ignoreboth is shorthand for ignorespace and ignoredups.}
\cmdOptLl{erasedups}{a value of erasedups causes all previous lines matching the current line to be removed from the history list before that line is saved.}
\cmdL{HISTIGNORE}{controls which commands to ignore and not save to the history list.}

%}}}
\subsection{Shopt Option}{shopt options can be set by a {\tt shopt -s option} and can be unset by a {\tt shopt -u option} shell com\-mand.}%{{{
\cmdS{histappend}{setting the variable appends current session history to HISTFILE. Unsetting overwrites the file each time}
\cmdS{histreedit}{if set, puts a failed history substitution back on the command line for re-editing}
\cmdS{histverify}{if set, puts the command to be executed after a substitution on command line as if you had typed it}
%}}}
%% Footer
\copyrightnotice

% Ending
\supereject
\if L\lr \else\null\vfill\eject\fi
\if L\lr \else\null\vfill\eject\fi
\bye

% EOF
